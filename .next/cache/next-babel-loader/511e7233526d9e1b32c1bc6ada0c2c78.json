{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from \"react\";\nimport { Upload, Modal } from \"antd\";\n\nfunction getBase64(file) {\n  return new _Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n\n    reader.onload = () => resolve(reader.result);\n\n    reader.onerror = error => reject(error);\n  });\n}\n\nexport default function index() {\n  const {\n    0: state,\n    1: _setState\n  } = useState({\n    previewVisible: false,\n    previewImage: \"\",\n    fileList: [{\n      uid: \"-1\",\n      name: \"image.png\",\n      status: \"done\",\n      url: \"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png\"\n    }, {\n      uid: \"-2\",\n      name: \"image.png\",\n      status: \"done\",\n      url: \"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png\"\n    }, {\n      uid: \"-3\",\n      name: \"image.png\",\n      status: \"done\",\n      url: \"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png\"\n    }, {\n      uid: \"-4\",\n      name: \"image.png\",\n      status: \"done\",\n      url: \"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png\"\n    }, {\n      uid: \"-5\",\n      name: \"image.png\",\n      status: \"error\"\n    }]\n  });\n\n  const setState = _state => {\n    _setState(state => _objectSpread({}, state, {}, _state || {}));\n  };\n\n  const handleCancel = () => setState({\n    previewVisible: false\n  });\n\n  const handlePreview = async file => {\n    if (!file.url && !file.preview) {\n      file.preview = await getBase64(file.originFileObj);\n    }\n\n    setState({\n      previewImage: file.url || file.preview,\n      previewVisible: true\n    });\n  };\n\n  const handleChange = ({\n    fileList\n  }) => setState({\n    fileList\n  });\n\n  const {\n    previewVisible,\n    previewImage,\n    fileList\n  } = state;\n\n  const uploadButton = __jsx(\"div\", null, __jsx(\"div\", {\n    className: \"ant-upload-text\"\n  }, \"Upload\"));\n\n  return __jsx(\"div\", {\n    className: \"clearfix\"\n  }, __jsx(Upload, {\n    action: \"https://www.mocky.io/v2/5cc8019d300000980a055e76\",\n    listType: \"picture-card\",\n    fileList: fileList,\n    onPreview: handlePreview,\n    onChange: handleChange\n  }, fileList.length >= 8 ? null : uploadButton), __jsx(Modal, {\n    visible: previewVisible,\n    footer: null,\n    onCancel: handleCancel\n  }, __jsx(\"img\", {\n    alt: \"example\",\n    style: {\n      width: \"100%\"\n    },\n    src: previewImage\n  })));\n}","map":{"version":3,"sources":["E:/iSofh/source/project-react-js-device-management/src/site/admin/components/device/ListImage/index.js"],"names":["React","useState","Upload","Modal","getBase64","file","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","index","state","_setState","previewVisible","previewImage","fileList","uid","name","status","url","setState","_state","handleCancel","handlePreview","preview","originFileObj","handleChange","uploadButton","length","width"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Upload, Modal } from \"antd\";\r\nfunction getBase64(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = (error) => reject(error);\r\n  });\r\n}\r\n\r\nexport default function index() {\r\n  const [state, _setState] = useState({\r\n    previewVisible: false,\r\n    previewImage: \"\",\r\n    fileList: [\r\n      {\r\n        uid: \"-1\",\r\n        name: \"image.png\",\r\n        status: \"done\",\r\n        url:\r\n          \"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png\",\r\n      },\r\n      {\r\n        uid: \"-2\",\r\n        name: \"image.png\",\r\n        status: \"done\",\r\n        url:\r\n          \"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png\",\r\n      },\r\n      {\r\n        uid: \"-3\",\r\n        name: \"image.png\",\r\n        status: \"done\",\r\n        url:\r\n          \"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png\",\r\n      },\r\n      {\r\n        uid: \"-4\",\r\n        name: \"image.png\",\r\n        status: \"done\",\r\n        url:\r\n          \"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png\",\r\n      },\r\n      {\r\n        uid: \"-5\",\r\n        name: \"image.png\",\r\n        status: \"error\",\r\n      },\r\n    ],\r\n  });\r\n  const setState = (_state) => {\r\n    _setState((state) => ({\r\n      ...state,\r\n      ...(_state || {}),\r\n    }));\r\n  };\r\n\r\n  const handleCancel = () => setState({ previewVisible: false });\r\n\r\n  const handlePreview = async (file) => {\r\n    if (!file.url && !file.preview) {\r\n      file.preview = await getBase64(file.originFileObj);\r\n    }\r\n\r\n    setState({\r\n      previewImage: file.url || file.preview,\r\n      previewVisible: true,\r\n    });\r\n  };\r\n\r\n  const handleChange = ({ fileList }) => setState({ fileList });\r\n\r\n  const { previewVisible, previewImage, fileList } = state;\r\n  const uploadButton = (\r\n    <div>\r\n      <div className=\"ant-upload-text\">Upload</div>\r\n    </div>\r\n  );\r\n  return (\r\n    <div className=\"clearfix\">\r\n      <Upload\r\n        action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\r\n        listType=\"picture-card\"\r\n        fileList={fileList}\r\n        onPreview={handlePreview}\r\n        onChange={handleChange}\r\n      >\r\n        {fileList.length >= 8 ? null : uploadButton}\r\n      </Upload>\r\n      <Modal visible={previewVisible} footer={null} onCancel={handleCancel}>\r\n        <img alt=\"example\" style={{ width: \"100%\" }} src={previewImage} />\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
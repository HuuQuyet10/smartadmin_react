{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { AdminPage, Panel } from \"@admin/components/admin\";\nimport Table from \"@admin/components/common/Table\";\nimport SelectSize from \"@admin/components/common/SelectSize\";\nimport Pagination from \"@admin/components/common/Pagination\";\nimport { Select, Button, DatePicker, Form, Input, Tooltip, Modal } from \"antd\";\nimport hangSanXuatProvider from \"@data-access/manufacturer-provider\";\nimport snackbar from \"@utils/snackbar-utils\";\nconst {\n  confirm\n} = Modal;\n\nfunction index(props) {\n  const {\n    0: state,\n    1: _setState\n  } = useState({\n    size: 10,\n    page: 0,\n    data: []\n  });\n  const {\n    0: dataIndex,\n    1: setDataIndex\n  } = useState({});\n\n  const setState = (data = {}) => {\n    _setState(state => {\n      return _objectSpread({}, state, {}, data);\n    });\n  };\n\n  const onSizeChange = size => {\n    onSearch(\"size\", size);\n    setState({\n      size: size\n    });\n  };\n\n  const onPageChange = page => {\n    onSearch(\"page\", page - 1);\n    setState({\n      page: page\n    });\n  };\n\n  useEffect(() => {\n    onSearch(0, 10);\n  }, []);\n\n  const onSearch = (action, item) => {\n    let page = action === \"page\" ? item : action === \"size\" ? 0 : state.page;\n    let size = action === \"size\" ? item : state.size;\n    let ma = action === \"ma\" ? item : state.maSearch;\n    let ten = action === \"ten\" ? item : state.tenSearch;\n    hangSanXuatProvider.search(page, size, ma, ten).then(s => {\n      if (s.code == 0) {\n        setState({\n          total: s.totalElements,\n          data: s.data && s.data.length ? s.data.map((item, index) => {\n            return {\n              key: index,\n              col1: page * size + index + 1,\n              col2: item.ma,\n              col3: item.ten,\n              col4: new Date(item.createdAt).format(\"dd-MM-YYYY\"),\n              col5: item\n            };\n          }) : []\n        });\n      }\n    }).catch(e => {});\n  };\n\n  const onDeleteItem = item => {\n    return new _Promise((resolve, reject) => {\n      confirm({\n        title: \"Xác nhận\",\n        content: `Bạn có muốn xóa tài khoản ${item.ten}?`,\n        okText: \"Xóa\",\n        okType: \"danger\",\n        cancelText: \"Hủy\",\n\n        onOk() {\n          hangSanXuatProvider.delete(item.id).then(s => {\n            if (s && s.code === 0) {\n              snackbar.show(\"Xóa tài khoản thành công\", \"success\");\n              onSearch(0, 10);\n            } else {\n              snackbar.show(\"Xóa tài khoản không thành công\", \"danger\");\n            }\n          }).catch(e => {});\n        },\n\n        onCancel() {\n          reject();\n        }\n\n      });\n    });\n  };\n\n  const editItem = item => {\n    if (item) {\n      props.history.push(\"/admin/user/\" + item.id);\n    } else {\n      props.history.push(\"/admin/user/create\");\n    }\n  };\n\n  const onClose = () => {\n    setDataIndex({});\n    setState({\n      ma: \"\",\n      ten: \"\"\n    });\n    props.history.push(\"/admin/user\");\n  };\n\n  return __jsx(AdminPage, {\n    icon: \"subheader-icon fal fa-window\",\n    header: \"Qu\\u1EA3n l\\xFD t\\xE0i kho\\u1EA3n\",\n    subheader: \"Danh s\\xE1ch t\\xE0i kho\\u1EA3n\"\n  }, __jsx(Panel, {\n    id: \"panel-list-site\",\n    title: \"DANH S\\xC1CH T\\xC0I KHO\\u1EA2N\",\n    toolbar: __jsx(\"div\", {\n      className: \"toolbar\"\n    }, __jsx(Button, {\n      className: \"button\",\n      onClick: () => editItem()\n    }, \"Th\\xEAm m\\u1EDBi\"))\n  }, __jsx(Table, {\n    scroll: {\n      x: 800,\n      y: 500\n    },\n    style: {\n      marginLeft: -10,\n      marginRight: -10\n    },\n    className: \"custom\",\n    columns: [{\n      title: __jsx(\"div\", {\n        className: \"custome-header\"\n      }, __jsx(\"div\", {\n        className: \"title-box\"\n      }, \"STT\"), __jsx(\"div\", {\n        className: \"addition-box\"\n      })),\n      width: 100,\n      dataIndex: \"col1\",\n      key: \"col1\"\n    }, {\n      title: __jsx(\"div\", {\n        className: \"custome-header\"\n      }, __jsx(\"div\", {\n        className: \"title-box\"\n      }, \"M\\xE3 t\\xE0i kho\\u1EA3n\"), __jsx(\"div\", {\n        className: \"addition-box\"\n      }, __jsx(\"div\", {\n        className: \"search-box\"\n      }, __jsx(\"img\", {\n        src: require(\"@images/icon/ic-search.png\")\n      }), __jsx(\"input\", {\n        value: state.maSearch,\n        onChange: e => onSearch(\"ma\", e.target.value),\n        placeholder: \"T\\xECm theo m\\xE3 t\\xE0i kho\\u1EA3n\"\n      })))),\n      width: 200,\n      dataIndex: \"col2\",\n      key: \"col2\"\n    }, {\n      title: __jsx(\"div\", {\n        className: \"custome-header\"\n      }, __jsx(\"div\", {\n        className: \"title-box\"\n      }, \"T\\xEAn t\\xE0i kho\\u1EA3n\"), __jsx(\"div\", {\n        className: \"addition-box\"\n      }, __jsx(\"div\", {\n        className: \"search-box\"\n      }, __jsx(\"img\", {\n        src: require(\"@images/icon/ic-search.png\")\n      }), __jsx(\"input\", {\n        value: state.tenSearch,\n        onChange: e => onSearch(\"ten\", e.target.value),\n        placeholder: \"T\\xECm theo t\\xEAn t\\xE0i kho\\u1EA3n\"\n      })))),\n      width: 300,\n      dataIndex: \"col3\",\n      key: \"col3\"\n    }, {\n      title: __jsx(\"div\", {\n        className: \"custome-header\"\n      }, __jsx(\"div\", {\n        className: \"title-box\"\n      }, \"Ng\\xE0y t\\u1EA1o\"), __jsx(\"div\", {\n        className: \"addition-box\"\n      })),\n      width: 200,\n      dataIndex: \"col4\",\n      key: \"col4\"\n    }, {\n      title: __jsx(\"div\", {\n        className: \"custome-header\"\n      }, __jsx(\"div\", {\n        className: \"title-box\"\n      }, \"Ti\\u1EC7n \\xEDch\"), __jsx(\"div\", {\n        className: \"addition-box\"\n      })),\n      width: 90,\n      dataIndex: \"col5\",\n      key: \"col5\",\n      fixed: \"right\",\n      render: item => {\n        return __jsx(\"div\", {\n          className: \"col-action\"\n        }, __jsx(Tooltip, {\n          placement: \"topLeft\",\n          title: \"Sửa\"\n        }, __jsx(\"div\", null, __jsx(\"a\", {\n          onClick: () => editItem(item),\n          className: \"btn btn-info btn-icon waves-effect waves-themed\"\n        }, __jsx(\"i\", {\n          className: \"fal fa-edit\"\n        })))), __jsx(Tooltip, {\n          placement: \"topLeft\",\n          title: \"Xóa\"\n        }, __jsx(\"div\", null, __jsx(\"a\", {\n          onClick: () => onDeleteItem(item),\n          className: \"btn btn-info btn-icon waves-effect waves-themed\"\n        }, __jsx(\"i\", {\n          className: \"fal fa-trash-alt\"\n        })))));\n      }\n    }],\n    dataSource: state.data\n  }), __jsx(\"div\", {\n    className: \"footer\"\n  }, __jsx(SelectSize, {\n    value: state.size,\n    selectItem: onSizeChange\n  }), __jsx(Pagination, {\n    onPageChange: onPageChange,\n    page: state.page,\n    size: state.size,\n    total: state.total,\n    style: {\n      flex: 1,\n      justifyContent: \"flex-end\"\n    }\n  }))));\n}\n\nexport default Form.create()(index);","map":{"version":3,"sources":["E:/iSofh/source/project-react-js-device-management/src/site/admin/containers/user/index.js"],"names":["React","useState","useEffect","AdminPage","Panel","Table","SelectSize","Pagination","Select","Button","DatePicker","Form","Input","Tooltip","Modal","hangSanXuatProvider","snackbar","confirm","index","props","state","_setState","size","page","data","dataIndex","setDataIndex","setState","onSizeChange","onSearch","onPageChange","action","item","ma","maSearch","ten","tenSearch","search","then","s","code","total","totalElements","length","map","key","col1","col2","col3","col4","Date","createdAt","format","col5","catch","e","onDeleteItem","resolve","reject","title","content","okText","okType","cancelText","onOk","delete","id","show","onCancel","editItem","history","push","onClose","x","y","marginLeft","marginRight","width","require","target","value","fixed","render","flex","justifyContent","create"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { AdminPage, Panel } from \"@admin/components/admin\";\r\nimport Table from \"@admin/components/common/Table\";\r\nimport SelectSize from \"@admin/components/common/SelectSize\";\r\nimport Pagination from \"@admin/components/common/Pagination\";\r\nimport { Select, Button, DatePicker, Form, Input, Tooltip, Modal } from \"antd\";\r\nimport hangSanXuatProvider from \"@data-access/manufacturer-provider\";\r\nimport snackbar from \"@utils/snackbar-utils\";\r\nconst { confirm } = Modal;\r\nfunction index(props) {\r\n  const [state, _setState] = useState({\r\n    size: 10,\r\n    page: 0,\r\n    data: [],\r\n  });\r\n  const [dataIndex, setDataIndex] = useState({});\r\n  const setState = (data = {}) => {\r\n    _setState((state) => {\r\n      return { ...state, ...data };\r\n    });\r\n  };\r\n  const onSizeChange = (size) => {\r\n    onSearch(\"size\", size);\r\n    setState({\r\n      size: size\r\n    })\r\n  };\r\n  const onPageChange = (page) => {\r\n    onSearch(\"page\", page - 1);\r\n    setState({\r\n      page: page\r\n    })\r\n  };\r\n  useEffect(() => {\r\n    onSearch(0, 10);\r\n  }, []);\r\n  const onSearch = (action, item) => {\r\n    let page = action === \"page\" ? item : action === \"size\" ? 0 : state.page;\r\n    let size = action === \"size\" ? item : state.size;\r\n    let ma = action === \"ma\" ? item : state.maSearch;\r\n    let ten = action === \"ten\" ? item : state.tenSearch;\r\n    hangSanXuatProvider\r\n      .search(page, size, ma, ten)\r\n      .then((s) => {\r\n        if (s.code == 0) {\r\n          setState({\r\n            total: s.totalElements,\r\n            data:\r\n              s.data && s.data.length\r\n                ? s.data.map((item, index) => {\r\n                  return {\r\n                    key: index,\r\n                    col1: page * size + index + 1,\r\n                    col2: item.ma,\r\n                    col3: item.ten,\r\n                    col4: new Date(item.createdAt).format(\"dd-MM-YYYY\"),\r\n                    col5: item,\r\n                  };\r\n                })\r\n                : [],\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => { });\r\n  };\r\n  const onDeleteItem = (item) => {\r\n    return new Promise((resolve, reject) => {\r\n      confirm({\r\n        title: \"Xác nhận\",\r\n        content: `Bạn có muốn xóa tài khoản ${item.ten}?`,\r\n        okText: \"Xóa\",\r\n        okType: \"danger\",\r\n        cancelText: \"Hủy\",\r\n        onOk() {\r\n          hangSanXuatProvider\r\n            .delete(item.id)\r\n            .then((s) => {\r\n              if (s && s.code === 0) {\r\n                snackbar.show(\"Xóa tài khoản thành công\", \"success\");\r\n                onSearch(0, 10);\r\n              } else {\r\n                snackbar.show(\"Xóa tài khoản không thành công\", \"danger\");\r\n              }\r\n            })\r\n            .catch((e) => { });\r\n        },\r\n        onCancel() {\r\n          reject();\r\n        },\r\n      });\r\n    });\r\n  };\r\n  const editItem = (item) => {\r\n    if (item) {\r\n      props.history.push(\"/admin/user/\" + item.id)\r\n    } else {\r\n      props.history.push(\"/admin/user/create\")\r\n    }\r\n  };\r\n  const onClose = () => {\r\n    setDataIndex({});\r\n    setState({\r\n      ma: \"\",\r\n      ten: \"\"\r\n    })\r\n    props.history.push(\"/admin/user\")\r\n  }\r\n  \r\n  return (\r\n    <AdminPage\r\n      icon=\"subheader-icon fal fa-window\"\r\n      header=\"Quản lý tài khoản\"\r\n      subheader=\"Danh sách tài khoản\"\r\n    >\r\n      <Panel\r\n        id=\"panel-list-site\"\r\n        title=\"DANH SÁCH TÀI KHOẢN\"\r\n        toolbar={\r\n          <div className=\"toolbar\">\r\n            <Button className=\"button\" onClick={() => editItem()}>\r\n              Thêm mới\r\n            </Button>\r\n          </div>\r\n        }\r\n      >\r\n        <Table\r\n          scroll={{ x: 800, y: 500 }}\r\n          style={{ marginLeft: -10, marginRight: -10 }}\r\n          className=\"custom\"\r\n          columns={[\r\n            {\r\n              title: (\r\n                <div className=\"custome-header\">\r\n                  <div className=\"title-box\">STT</div>\r\n                  <div className=\"addition-box\"></div>\r\n                </div>\r\n              ),\r\n              width: 100,\r\n              dataIndex: \"col1\",\r\n              key: \"col1\",\r\n            },\r\n            {\r\n              title: (\r\n                <div className=\"custome-header\">\r\n                  <div className=\"title-box\">Mã tài khoản</div>\r\n                  <div className=\"addition-box\">\r\n                    <div className=\"search-box\">\r\n                      <img src={require(\"@images/icon/ic-search.png\")} />\r\n                      <input\r\n                        value={state.maSearch}\r\n                        onChange={(e) => onSearch(\"ma\", e.target.value)}\r\n                        placeholder=\"Tìm theo mã tài khoản\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ),\r\n              width: 200,\r\n              dataIndex: \"col2\",\r\n              key: \"col2\",\r\n            },\r\n            {\r\n              title: (\r\n                <div className=\"custome-header\">\r\n                  <div className=\"title-box\">Tên tài khoản</div>\r\n                  <div className=\"addition-box\">\r\n                    <div className=\"search-box\">\r\n                      <img src={require(\"@images/icon/ic-search.png\")} />\r\n                      <input\r\n                        value={state.tenSearch}\r\n                        onChange={(e) => onSearch(\"ten\", e.target.value)}\r\n                        placeholder=\"Tìm theo tên tài khoản\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ),\r\n              width: 300,\r\n              dataIndex: \"col3\",\r\n              key: \"col3\",\r\n            },\r\n            {\r\n              title: (\r\n                <div className=\"custome-header\">\r\n                  <div className=\"title-box\">Ngày tạo</div>\r\n                  <div className=\"addition-box\"></div>\r\n                </div>\r\n              ),\r\n              width: 200,\r\n              dataIndex: \"col4\",\r\n              key: \"col4\",\r\n            },\r\n            {\r\n              title: (\r\n                <div className=\"custome-header\">\r\n                  <div className=\"title-box\">Tiện ích</div>\r\n                  <div className=\"addition-box\"></div>\r\n                </div>\r\n              ),\r\n              width: 90,\r\n              dataIndex: \"col5\",\r\n              key: \"col5\",\r\n              fixed: \"right\",\r\n              render: (item) => {\r\n                return (\r\n                  <div className=\"col-action\">\r\n                    <Tooltip placement=\"topLeft\" title={\"Sửa\"}>\r\n                      <div>\r\n                        <a\r\n                          onClick={() => editItem(item)}\r\n                          className=\"btn btn-info btn-icon waves-effect waves-themed\"\r\n                        >\r\n                          <i className=\"fal fa-edit\"></i>\r\n                        </a>\r\n                      </div>\r\n                    </Tooltip>\r\n                    <Tooltip placement=\"topLeft\" title={\"Xóa\"}>\r\n                      <div>\r\n                        <a\r\n                          onClick={() => onDeleteItem(item)}\r\n                          className=\"btn btn-info btn-icon waves-effect waves-themed\"\r\n                        >\r\n                          <i className=\"fal fa-trash-alt\"></i>\r\n                        </a>\r\n                      </div>\r\n                    </Tooltip>\r\n                  </div>\r\n                );\r\n              },\r\n            },\r\n          ]}\r\n          dataSource={state.data}\r\n        ></Table>\r\n        <div className=\"footer\">\r\n          <SelectSize value={state.size} selectItem={onSizeChange} />\r\n          <Pagination\r\n            onPageChange={onPageChange}\r\n            page={state.page}\r\n            size={state.size}\r\n            total={state.total}\r\n            style={{ flex: 1, justifyContent: \"flex-end\" }}\r\n          />\r\n        </div>\r\n      </Panel>\r\n    </AdminPage>\r\n  );\r\n}\r\nexport default Form.create()(index);"]},"metadata":{},"sourceType":"module"}
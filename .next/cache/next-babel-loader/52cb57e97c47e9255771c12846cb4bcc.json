{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Form, Button, Col, Row, Input, Select, Switch } from \"antd\";\nimport formTypeProvider from \"@data-access/device-type-provider\";\nimport snackbar from \"@utils/snackbar-utils\";\nimport dateUtils from \"mainam-react-native-date-utils\";\nimport { AdminPage, Panel } from \"@admin/components/admin\";\n\nfunction index(props) {\n  const id = props.data && props.data.id;\n  const {\n    0: state,\n    1: _setState\n  } = useState({\n    data: [],\n    ma: '',\n    ten: ''\n  });\n\n  const setState = (data = {}) => {\n    _setState(state => {\n      return _objectSpread({}, state, {}, data);\n    });\n  };\n\n  const getDetail = id => {\n    formTypeProvider.getById(id).then(s => {\n      if (s && s.code === 0) {\n        setState({\n          ma: s.data.ma,\n          ten: s.data.ten\n        });\n      }\n    }).catch(e => {});\n  };\n\n  if (id) {\n    getDetail(id);\n  }\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    props.form.validateFields((err, values) => {\n      if (!err) {\n        create();\n      }\n    });\n  };\n\n  const {\n    getFieldDecorator\n  } = props.form;\n\n  const create = () => {\n    let ma = state.ma ? state.ma : (props.data || {}).ma;\n    let ten = state.ten ? state.ten : (props.data || {}).ten;\n    formTypeProvider.createOrEdit(id, ma, ten).then(s => {\n      if (s && s.code === 0) {\n        if (id) {\n          snackbar.show(\"Cập nhật loại thiết bị thành công\", \"success\");\n        } else {\n          snackbar.show(\"Thêm mới loại thiết bị thành công\", \"success\");\n        }\n\n        props.onClose();\n      } else {\n        if (id) {\n          snackbar.show(\"Cập nhật loại thiết bị thất bại\", \"danger\");\n        } else {\n          snackbar.show(\"Thêm mới loại thiết bị thất bại\", \"danger\");\n        }\n      }\n    }).catch(e => {});\n  };\n\n  return __jsx(AdminPage, {\n    className: \"mgr-device-type\"\n  }, __jsx(Panel, {\n    title: id ? \"Chỉnh sửa loại thiết bị\" : \"Thêm mới loại thiết bị\",\n    id: \"mgr-device-type\",\n    allowClose: false,\n    allowCollapse: false\n  }, __jsx(Form, {\n    layout: \"vertical\",\n    hideRequiredMark: true,\n    onSubmit: handleSubmit\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col\"\n  }, __jsx(Form.Item, {\n    label: \"M\\xE3 lo\\u1EA1i thi\\u1EBFt b\\u1ECB\"\n  }, getFieldDecorator(\"ma\", {\n    rules: [{\n      required: true,\n      message: \"Nhập mã loại thiết bị\"\n    }],\n    initialValue: state.ma\n  })(__jsx(Input, {\n    onChange: e => setState(_objectSpread({}, state, {\n      ma: e.target.value\n    })),\n    placeholder: \"Nh\\u1EADp m\\xE3 lo\\u1EA1i thi\\u1EBFt b\\u1ECB\"\n  }))))), __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col\"\n  }, __jsx(Form.Item, {\n    label: \"Lo\\u1EA1i thi\\u1EBFt b\\u1ECB\"\n  }, getFieldDecorator(\"ten\", {\n    rules: [{\n      required: true,\n      message: \"Nhập loại thiết bị\"\n    }],\n    initialValue: state.ten\n  })(__jsx(Input, {\n    onChange: e => setState(_objectSpread({}, state, {\n      ten: e.target.value\n    })),\n    placeholder: \"Nh\\u1EADp lo\\u1EA1i thi\\u1EBFt b\\u1ECB\"\n  }))))), __jsx(\"div\", {\n    style: {\n      width: \"100%\",\n      borderTop: \"1px solid #e9e9e9\",\n      padding: \"16px 16px 0px\",\n      background: \"#fff\",\n      textAlign: \"right\"\n    }\n  }, __jsx(Button, {\n    onClick: props.onClose,\n    style: {\n      marginRight: 8\n    }\n  }, \"H\\u1EE7y\"), __jsx(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    onClick: handleSubmit\n  }, id ? \"Lưu thay đổi\" : \"Tạo mới\")))));\n}\n\nexport default Form.create()(index);","map":{"version":3,"sources":["E:/iSofh/source/project-react-js-device-management/src/site/admin/containers/device-type/create/index.js"],"names":["React","useState","useEffect","useRef","Form","Button","Col","Row","Input","Select","Switch","formTypeProvider","snackbar","dateUtils","AdminPage","Panel","index","props","id","data","state","_setState","ma","ten","setState","getDetail","getById","then","s","code","catch","e","handleSubmit","preventDefault","form","validateFields","err","values","create","getFieldDecorator","createOrEdit","show","onClose","rules","required","message","initialValue","target","value","width","borderTop","padding","background","textAlign","marginRight"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Form, Button, Col, Row, Input, Select, Switch } from \"antd\";\r\nimport formTypeProvider from \"@data-access/device-type-provider\";\r\nimport snackbar from \"@utils/snackbar-utils\";\r\nimport dateUtils from \"mainam-react-native-date-utils\";\r\nimport { AdminPage, Panel } from \"@admin/components/admin\";\r\nfunction index(props) {\r\n  const id = props.data && props.data.id;\r\n \r\n  const [state, _setState] = useState({\r\n    data: [],\r\n    ma: '',\r\n    ten: '',\r\n  });\r\n  const setState = (data = {}) => {\r\n    _setState((state) => {\r\n      return { ...state, ...data };\r\n    });\r\n  };\r\n  const getDetail = (id) => {\r\n    formTypeProvider\r\n      .getById(id)\r\n      .then((s) => {\r\n        if (s && s.code === 0) {\r\n          setState({\r\n            ma: s.data.ma,\r\n            ten: s.data.ten\r\n          });\r\n        }\r\n      })\r\n      .catch((e) => { });\r\n  };\r\n  if (id){\r\n    getDetail(id);\r\n  }\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        create();\r\n      }\r\n    });\r\n  };\r\n  const { getFieldDecorator } = props.form;\r\n  const create = () => {\r\n    let ma = state.ma ? state.ma : (props.data || {}).ma\r\n    let ten = state.ten ? state.ten : (props.data || {}).ten\r\n    formTypeProvider.createOrEdit(id, ma, ten).then((s) => {\r\n      if (s && s.code === 0) {\r\n        if (id) {\r\n          snackbar.show(\"Cập nhật loại thiết bị thành công\", \"success\");\r\n        } else {\r\n          snackbar.show(\"Thêm mới loại thiết bị thành công\", \"success\");\r\n        }\r\n        props.onClose()\r\n      } else {\r\n        if (id) {\r\n          snackbar.show(\"Cập nhật loại thiết bị thất bại\", \"danger\");\r\n        } else {\r\n          snackbar.show(\"Thêm mới loại thiết bị thất bại\", \"danger\");\r\n        }\r\n      }\r\n    }).catch((e) => { });\r\n  };\r\n  return (\r\n    <AdminPage className=\"mgr-device-type\">\r\n      <Panel\r\n        title={id ? \"Chỉnh sửa loại thiết bị\" : \"Thêm mới loại thiết bị\"}\r\n        id={\"mgr-device-type\"}\r\n        allowClose={false}\r\n        allowCollapse={false}\r\n      >\r\n        <Form layout=\"vertical\" hideRequiredMark onSubmit={handleSubmit}>\r\n          <div className=\"row\">\r\n            <div className=\"col\">\r\n              <Form.Item label=\"Mã loại thiết bị\">\r\n                {getFieldDecorator(\"ma\", {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: \"Nhập mã loại thiết bị\",\r\n                    },\r\n                  ],\r\n                  initialValue: state.ma,\r\n                })(\r\n                  <Input\r\n                    onChange={(e) =>\r\n                      setState({\r\n                        ...state,\r\n                        ma: e.target.value,\r\n                      })\r\n                    }\r\n                    placeholder=\"Nhập mã loại thiết bị\"\r\n                  />\r\n                )}\r\n              </Form.Item>\r\n            </div>\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"col\">\r\n              <Form.Item label=\"Loại thiết bị\">\r\n                {getFieldDecorator(\"ten\", {\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: \"Nhập loại thiết bị\",\r\n                    },\r\n                  ],\r\n                  initialValue: state.ten,\r\n                })(\r\n                  <Input\r\n                    onChange={(e) =>\r\n                      setState({\r\n                        ...state,\r\n                        ten: e.target.value,\r\n                      })\r\n                    }\r\n                    placeholder=\"Nhập loại thiết bị\"\r\n                  />\r\n                )}\r\n              </Form.Item>\r\n            </div>\r\n          </div>\r\n          <div\r\n            style={{\r\n              width: \"100%\",\r\n              borderTop: \"1px solid #e9e9e9\",\r\n              padding: \"16px 16px 0px\",\r\n              background: \"#fff\",\r\n              textAlign: \"right\",\r\n            }}\r\n          >\r\n            <Button onClick={props.onClose} style={{ marginRight: 8 }}>\r\n              Hủy\r\n            </Button>\r\n            <Button type=\"primary\" htmlType=\"submit\" onClick={handleSubmit}>\r\n              {id ? \"Lưu thay đổi\" : \"Tạo mới\"}\r\n            </Button>\r\n          </div>\r\n        </Form>\r\n      </Panel>\r\n    </AdminPage>\r\n  );\r\n}\r\n\r\nexport default Form.create()(index);\r\n"]},"metadata":{},"sourceType":"module"}
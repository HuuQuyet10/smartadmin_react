{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport { AdminPage, Panel } from \"@admin/components/admin\";\nimport Table from \"@admin/components/common/Table\";\nimport SelectSize from \"@admin/components/common/SelectSize\";\nimport Pagination from \"@admin/components/common/Pagination\";\nimport { Select, Button, DatePicker, Form, Input, Tooltip, Modal } from \"antd\";\nimport statusProvider from \"@data-access/status-provider\";\nimport snackbar from \"@utils/snackbar-utils\";\nvar confirm = Modal.confirm;\n\nfunction index(props) {\n  var _useState = useState({\n    size: 10,\n    page: 0,\n    data: []\n  }),\n      state = _useState[0],\n      _setState = _useState[1];\n\n  var _useState2 = useState({}),\n      dataIndex = _useState2[0],\n      setDataIndex = _useState2[1];\n\n  var setState = function setState() {\n    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _setState(function (state) {\n      return _objectSpread({}, state, {}, data);\n    });\n  };\n\n  var onSizeChange = function onSizeChange(size) {\n    onSearch(\"size\", size);\n    setState({\n      size: size\n    });\n  };\n\n  var onPageChange = function onPageChange(page) {\n    onSearch(\"page\", page - 1);\n    setState({\n      page: page\n    });\n  };\n\n  useEffect(function () {\n    onSearch(0, 10);\n  }, []);\n\n  var onSearch = function onSearch(action, item) {\n    var page = action === \"page\" ? item : action === \"size\" ? 0 : state.page;\n    var size = action === \"size\" ? item : state.size;\n    var ten = action === \"ten\" ? item : state.tenSearch;\n    statusProvider.search(page, size, ten).then(function (s) {\n      if (s.code == 0) {\n        setState({\n          total: s.totalElements,\n          data: s.data && s.data.length ? s.data.map(function (item, index) {\n            return {\n              key: index,\n              col1: page * size + index + 1,\n              col2: item.ten,\n              col3: new Date(item.createdAt).format(\"dd-MM-YYYY\"),\n              col4: item\n            };\n          }) : []\n        });\n      }\n    })[\"catch\"](function (e) {});\n  };\n\n  var onDeleteItem = function onDeleteItem(item) {\n    return new _Promise(function (resolve, reject) {\n      confirm({\n        title: \"Xác nhận\",\n        content: \"B\\u1EA1n c\\xF3 mu\\u1ED1n x\\xF3a tr\\u1EA1ng th\\xE1i thi\\u1EBFt l\\u1EADp \".concat(item.ten, \"?\"),\n        okText: \"Xóa\",\n        okType: \"danger\",\n        cancelText: \"Hủy\",\n        onOk: function onOk() {\n          statusProvider[\"delete\"](item.id).then(function (s) {\n            if (s && s.code === 0) {\n              snackbar.show(\"Xóa trạng thái thiết lập thành công\", \"success\");\n              onSearch(0, 10);\n            } else {\n              snackbar.show(\"Xóa trạng thái thiết lập không thành công\", \"danger\");\n            }\n          })[\"catch\"](function (e) {});\n        },\n        onCancel: function onCancel() {\n          reject();\n        }\n      });\n    });\n  };\n\n  var editItem = function editItem(item) {\n    if (item) {\n      setDataIndex(item);\n    } else {\n      setDataIndex(item);\n    }\n  };\n\n  var onClose = function onClose() {\n    setDataIndex({});\n    setState({\n      ten: \"\"\n    });\n    props.history.push(\"/admin/status\");\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    props.form.validateFields(function (err, values) {\n      if (!err) {\n        create();\n      }\n    });\n  };\n\n  var getFieldDecorator = props.form.getFieldDecorator;\n\n  var create = function create() {\n    var ten = state.ten ? state.ten : dataIndex.ten;\n    statusProvider.createOrEdit(dataIndex.id, ten).then(function (s) {\n      if (s && s.code === 0) {\n        if (dataIndex.id) {\n          snackbar.show(\"Cập nhật trạng thái thiết lập thành công\", \"success\");\n        } else {\n          snackbar.show(\"Thêm mới trạng thái thiết lập thành công\", \"success\");\n        }\n\n        onSearch(0, 10, \"\", \"\");\n        onClose();\n      } else {\n        if (dataIndex.id) {\n          snackbar.show(\"Cập nhật trạng thái thiết lập thất bại\", \"danger\");\n        } else {\n          snackbar.show(\"Thêm mới trạng thái thiết lập thất bại\", \"danger\");\n        }\n      }\n    })[\"catch\"](function (e) {});\n  };\n\n  return __jsx(AdminPage, {\n    icon: \"subheader-icon fal fa-window\",\n    header: \"Qu\\u1EA3n l\\xFD tr\\u1EA1ng th\\xE1i thi\\u1EBFt l\\u1EADp\",\n    subheader: \"Danh s\\xE1ch tr\\u1EA1ng th\\xE1i thi\\u1EBFt l\\u1EADp\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-lg-8 ui-sortable sortable-grid\"\n  }, __jsx(Panel, {\n    id: \"panel-list-site\",\n    title: \"DANH S\\xC1CH TR\\u1EA0NG TH\\xC1I THI\\u1EBET L\\u1EACP\" // toolbar={\n    //   <div className=\"toolbar\">\n    //     <Button className=\"button\" onClick={() => editItem()}>\n    //       Thêm mới\n    // </Button>\n    //   </div>\n    // }\n\n  }, __jsx(Table, {\n    scroll: {\n      x: 800,\n      y: 500\n    },\n    style: {\n      marginLeft: -10,\n      marginRight: -10\n    },\n    className: \"custom\",\n    columns: [{\n      title: __jsx(\"div\", {\n        className: \"custome-header\"\n      }, __jsx(\"div\", {\n        className: \"title-box\"\n      }, \"STT\"), __jsx(\"div\", {\n        className: \"addition-box\"\n      })),\n      width: 100,\n      dataIndex: \"col1\",\n      key: \"col1\"\n    }, {\n      title: __jsx(\"div\", {\n        className: \"custome-header\"\n      }, __jsx(\"div\", {\n        className: \"title-box\"\n      }, \"T\\xEAn tr\\u1EA1ng th\\xE1i thi\\u1EBFt l\\u1EADp\"), __jsx(\"div\", {\n        className: \"addition-box\"\n      }, __jsx(\"div\", {\n        className: \"search-box\"\n      }, __jsx(\"img\", {\n        src: require(\"@images/icon/ic-search.png\")\n      }), __jsx(\"input\", {\n        value: state.tenSearch,\n        onChange: function onChange(e) {\n          return onSearch(\"ten\", e.target.value);\n        },\n        placeholder: \"T\\xECm theo t\\xEAn tr\\u1EA1ng th\\xE1i thi\\u1EBFt l\\u1EADp\"\n      })))),\n      width: 300,\n      dataIndex: \"col2\",\n      key: \"col2\"\n    }, {\n      title: __jsx(\"div\", {\n        className: \"custome-header\"\n      }, __jsx(\"div\", {\n        className: \"title-box\"\n      }, \"Ng\\xE0y t\\u1EA1o\"), __jsx(\"div\", {\n        className: \"addition-box\"\n      })),\n      width: 200,\n      dataIndex: \"col3\",\n      key: \"col3\"\n    }, {\n      title: __jsx(\"div\", {\n        className: \"custome-header\"\n      }, __jsx(\"div\", {\n        className: \"title-box\"\n      }, \"Ti\\u1EC7n \\xEDch\"), __jsx(\"div\", {\n        className: \"addition-box\"\n      })),\n      width: 90,\n      dataIndex: \"col4\",\n      key: \"col4\",\n      fixed: \"right\",\n      render: function render(item) {\n        return __jsx(\"div\", {\n          className: \"col-action\"\n        }, __jsx(Tooltip, {\n          placement: \"topLeft\",\n          title: \"Sửa\"\n        }, __jsx(\"div\", null, __jsx(\"a\", {\n          onClick: function onClick() {\n            return editItem(item);\n          },\n          className: \"btn btn-info btn-icon waves-effect waves-themed\"\n        }, __jsx(\"i\", {\n          className: \"fal fa-edit\"\n        })))), __jsx(Tooltip, {\n          placement: \"topLeft\",\n          title: \"Xóa\"\n        }, __jsx(\"div\", null, __jsx(\"a\", {\n          onClick: function onClick() {\n            return onDeleteItem(item);\n          },\n          className: \"btn btn-info btn-icon waves-effect waves-themed\"\n        }, __jsx(\"i\", {\n          className: \"fal fa-trash-alt\"\n        })))));\n      }\n    }],\n    dataSource: state.data\n  }), __jsx(\"div\", {\n    className: \"footer\"\n  }, __jsx(SelectSize, {\n    value: state.size,\n    selectItem: onSizeChange\n  }), __jsx(Pagination, {\n    onPageChange: onPageChange,\n    page: state.page,\n    size: state.size,\n    total: state.total,\n    style: {\n      flex: 1,\n      justifyContent: \"flex-end\"\n    }\n  })))), __jsx(\"div\", {\n    className: \"col-lg-4  ui-sortable sortable-grid\"\n  }, __jsx(Panel, {\n    title: dataIndex.id ? \"Chỉnh sửa\" : \"Thêm mới\",\n    id: \"mgr-form-type\" // allowClose={false}\n    // allowCollapse={false}\n\n  }, __jsx(Form, {\n    layout: \"vertical\",\n    hideRequiredMark: true,\n    onSubmit: handleSubmit\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col\"\n  }, __jsx(Form.Item, {\n    label: \"Tr\\u1EA1ng th\\xE1i thi\\u1EBFt l\\u1EADp\"\n  }, getFieldDecorator(\"dataIndex.ten\", {\n    rules: [{\n      required: true,\n      message: \"Nhập trạng thái thiết lập\"\n    }],\n    initialValue: dataIndex.ten ? dataIndex.ten : \"\"\n  })(__jsx(Input, {\n    onChange: function onChange(e) {\n      return setState({\n        ten: e.target.value\n      });\n    },\n    placeholder: \"Nh\\u1EADp tr\\u1EA1ng th\\xE1i thi\\u1EBFt l\\u1EADp\"\n  }))))), __jsx(\"div\", {\n    style: {\n      width: \"100%\",\n      borderTop: \"1px solid #e9e9e9\",\n      padding: \"16px 16px 0px\",\n      background: \"#fff\",\n      textAlign: \"right\"\n    }\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      return onClose();\n    },\n    style: {\n      marginRight: 8\n    }\n  }, \"H\\u1EE7y\"), __jsx(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    onClick: handleSubmit\n  }, dataIndex.id ? \"Lưu thay đổi\" : \"Tạo mới\")))))));\n}\n\nexport default Form.create()(index);","map":{"version":3,"sources":["E:/iSofh/source/project-react-js-device-management/src/site/admin/containers/status/index.js"],"names":["React","useState","useEffect","AdminPage","Panel","Table","SelectSize","Pagination","Select","Button","DatePicker","Form","Input","Tooltip","Modal","statusProvider","snackbar","confirm","index","props","size","page","data","state","_setState","dataIndex","setDataIndex","setState","onSizeChange","onSearch","onPageChange","action","item","ten","tenSearch","search","then","s","code","total","totalElements","length","map","key","col1","col2","col3","Date","createdAt","format","col4","e","onDeleteItem","resolve","reject","title","content","okText","okType","cancelText","onOk","id","show","onCancel","editItem","onClose","history","push","handleSubmit","preventDefault","form","validateFields","err","values","create","getFieldDecorator","createOrEdit","x","y","marginLeft","marginRight","width","require","target","value","fixed","render","flex","justifyContent","rules","required","message","initialValue","borderTop","padding","background","textAlign"],"mappings":";;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,SAAT,EAAoBC,KAApB,QAAiC,yBAAjC;AACA,OAAOC,KAAP,MAAkB,gCAAlB;AACA,OAAOC,UAAP,MAAuB,qCAAvB;AACA,OAAOC,UAAP,MAAuB,qCAAvB;AACA,SAASC,MAAT,EAAiBC,MAAjB,EAAyBC,UAAzB,EAAqCC,IAArC,EAA2CC,KAA3C,EAAkDC,OAAlD,EAA2DC,KAA3D,QAAwE,MAAxE;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AACA,OAAOC,QAAP,MAAqB,uBAArB;IACQC,O,GAAYH,K,CAAZG,O;;AACR,SAASC,KAAT,CAAeC,KAAf,EAAsB;AAAA,kBACSlB,QAAQ,CAAC;AAChCmB,IAAAA,IAAI,EAAE,EAD0B;AAEhCC,IAAAA,IAAI,EAAE,CAF0B;AAGhCC,IAAAA,IAAI,EAAE;AAH0B,GAAD,CADjB;AAAA,MACXC,KADW;AAAA,MACJC,SADI;;AAAA,mBAMgBvB,QAAQ,CAAC,EAAD,CANxB;AAAA,MAMXwB,SANW;AAAA,MAMAC,YANA;;AAOlB,MAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAe;AAAA,QAAdL,IAAc,uEAAP,EAAO;;AAC5BE,IAAAA,SAAS,CAAC,UAACD,KAAD,EAAW;AACjB,+BAAYA,KAAZ,MAAsBD,IAAtB;AACH,KAFQ,CAAT;AAGH,GAJD;;AAKA,MAAMM,YAAY,GAAG,SAAfA,YAAe,CAACR,IAAD,EAAU;AAC3BS,IAAAA,QAAQ,CAAC,MAAD,EAAST,IAAT,CAAR;AACAO,IAAAA,QAAQ,CAAC;AACLP,MAAAA,IAAI,EAAEA;AADD,KAAD,CAAR;AAGH,GALD;;AAMA,MAAMU,YAAY,GAAG,SAAfA,YAAe,CAACT,IAAD,EAAU;AAC3BQ,IAAAA,QAAQ,CAAC,MAAD,EAASR,IAAI,GAAG,CAAhB,CAAR;AACAM,IAAAA,QAAQ,CAAC;AACLN,MAAAA,IAAI,EAAEA;AADD,KAAD,CAAR;AAGH,GALD;;AAMAnB,EAAAA,SAAS,CAAC,YAAM;AACZ2B,IAAAA,QAAQ,CAAC,CAAD,EAAI,EAAJ,CAAR;AACH,GAFQ,EAEN,EAFM,CAAT;;AAGA,MAAMA,QAAQ,GAAG,SAAXA,QAAW,CAACE,MAAD,EAASC,IAAT,EAAkB;AAC/B,QAAIX,IAAI,GAAGU,MAAM,KAAK,MAAX,GAAoBC,IAApB,GAA2BD,MAAM,KAAK,MAAX,GAAoB,CAApB,GAAwBR,KAAK,CAACF,IAApE;AACA,QAAID,IAAI,GAAGW,MAAM,KAAK,MAAX,GAAoBC,IAApB,GAA2BT,KAAK,CAACH,IAA5C;AACA,QAAIa,GAAG,GAAGF,MAAM,KAAK,KAAX,GAAmBC,IAAnB,GAA0BT,KAAK,CAACW,SAA1C;AACAnB,IAAAA,cAAc,CACToB,MADL,CACYd,IADZ,EACkBD,IADlB,EACwBa,GADxB,EAEKG,IAFL,CAEU,UAACC,CAAD,EAAO;AACT,UAAIA,CAAC,CAACC,IAAF,IAAU,CAAd,EAAiB;AACbX,QAAAA,QAAQ,CAAC;AACLY,UAAAA,KAAK,EAAEF,CAAC,CAACG,aADJ;AAELlB,UAAAA,IAAI,EACAe,CAAC,CAACf,IAAF,IAAUe,CAAC,CAACf,IAAF,CAAOmB,MAAjB,GACMJ,CAAC,CAACf,IAAF,CAAOoB,GAAP,CAAW,UAACV,IAAD,EAAOd,KAAP,EAAiB;AAC1B,mBAAO;AACHyB,cAAAA,GAAG,EAAEzB,KADF;AAEH0B,cAAAA,IAAI,EAAEvB,IAAI,GAAGD,IAAP,GAAcF,KAAd,GAAsB,CAFzB;AAGH2B,cAAAA,IAAI,EAAEb,IAAI,CAACC,GAHR;AAIHa,cAAAA,IAAI,EAAE,IAAIC,IAAJ,CAASf,IAAI,CAACgB,SAAd,EAAyBC,MAAzB,CAAgC,YAAhC,CAJH;AAKHC,cAAAA,IAAI,EAAElB;AALH,aAAP;AAOH,WARC,CADN,GAUM;AAbL,SAAD,CAAR;AAeH;AACJ,KApBL,WAqBW,UAACmB,CAAD,EAAO,CAAG,CArBrB;AAsBH,GA1BD;;AA2BA,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACpB,IAAD,EAAU;AAC3B,WAAO,aAAY,UAACqB,OAAD,EAAUC,MAAV,EAAqB;AACpCrC,MAAAA,OAAO,CAAC;AACJsC,QAAAA,KAAK,EAAE,UADH;AAEJC,QAAAA,OAAO,mFAA0CxB,IAAI,CAACC,GAA/C,MAFH;AAGJwB,QAAAA,MAAM,EAAE,KAHJ;AAIJC,QAAAA,MAAM,EAAE,QAJJ;AAKJC,QAAAA,UAAU,EAAE,KALR;AAMJC,QAAAA,IANI,kBAMG;AACH7C,UAAAA,cAAc,UAAd,CACYiB,IAAI,CAAC6B,EADjB,EAEKzB,IAFL,CAEU,UAACC,CAAD,EAAO;AACT,gBAAIA,CAAC,IAAIA,CAAC,CAACC,IAAF,KAAW,CAApB,EAAuB;AACnBtB,cAAAA,QAAQ,CAAC8C,IAAT,CAAc,qCAAd,EAAqD,SAArD;AACAjC,cAAAA,QAAQ,CAAC,CAAD,EAAI,EAAJ,CAAR;AACH,aAHD,MAGO;AACHb,cAAAA,QAAQ,CAAC8C,IAAT,CAAc,2CAAd,EAA2D,QAA3D;AACH;AACJ,WATL,WAUW,UAACX,CAAD,EAAO,CAAG,CAVrB;AAWH,SAlBG;AAmBJY,QAAAA,QAnBI,sBAmBO;AACPT,UAAAA,MAAM;AACT;AArBG,OAAD,CAAP;AAuBH,KAxBM,CAAP;AAyBH,GA1BD;;AA2BA,MAAMU,QAAQ,GAAG,SAAXA,QAAW,CAAChC,IAAD,EAAU;AACvB,QAAIA,IAAJ,EAAU;AACNN,MAAAA,YAAY,CAACM,IAAD,CAAZ;AACH,KAFD,MAEO;AACHN,MAAAA,YAAY,CAACM,IAAD,CAAZ;AACH;AACJ,GAND;;AAOA,MAAMiC,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClBvC,IAAAA,YAAY,CAAC,EAAD,CAAZ;AACAC,IAAAA,QAAQ,CAAC;AACLM,MAAAA,GAAG,EAAE;AADA,KAAD,CAAR;AAGAd,IAAAA,KAAK,CAAC+C,OAAN,CAAcC,IAAd,CAAmB,eAAnB;AACH,GAND;;AAOA,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACjB,CAAD,EAAO;AACxBA,IAAAA,CAAC,CAACkB,cAAF;AACAlD,IAAAA,KAAK,CAACmD,IAAN,CAAWC,cAAX,CAA0B,UAACC,GAAD,EAAMC,MAAN,EAAiB;AACvC,UAAI,CAACD,GAAL,EAAU;AACNE,QAAAA,MAAM;AACT;AACJ,KAJD;AAKH,GAPD;;AA/FkB,MAuGVC,iBAvGU,GAuGYxD,KAAK,CAACmD,IAvGlB,CAuGVK,iBAvGU;;AAwGlB,MAAMD,MAAM,GAAG,SAATA,MAAS,GAAM;AACjB,QAAIzC,GAAG,GAAGV,KAAK,CAACU,GAAN,GAAYV,KAAK,CAACU,GAAlB,GAAwBR,SAAS,CAACQ,GAA5C;AACAlB,IAAAA,cAAc,CAAC6D,YAAf,CAA4BnD,SAAS,CAACoC,EAAtC,EAA0C5B,GAA1C,EAA+CG,IAA/C,CAAoD,UAACC,CAAD,EAAO;AACvD,UAAIA,CAAC,IAAIA,CAAC,CAACC,IAAF,KAAW,CAApB,EAAuB;AACnB,YAAIb,SAAS,CAACoC,EAAd,EAAkB;AACd7C,UAAAA,QAAQ,CAAC8C,IAAT,CAAc,0CAAd,EAA0D,SAA1D;AACH,SAFD,MAEO;AACH9C,UAAAA,QAAQ,CAAC8C,IAAT,CAAc,0CAAd,EAA0D,SAA1D;AACH;;AACDjC,QAAAA,QAAQ,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,EAAY,EAAZ,CAAR;AACAoC,QAAAA,OAAO;AACV,OARD,MAQO;AACH,YAAIxC,SAAS,CAACoC,EAAd,EAAkB;AACd7C,UAAAA,QAAQ,CAAC8C,IAAT,CAAc,wCAAd,EAAwD,QAAxD;AACH,SAFD,MAEO;AACH9C,UAAAA,QAAQ,CAAC8C,IAAT,CAAc,wCAAd,EAAwD,QAAxD;AACH;AACJ;AACJ,KAhBD,WAgBS,UAACX,CAAD,EAAO,CAAG,CAhBnB;AAiBH,GAnBD;;AAoBA,SACI,MAAC,SAAD;AACI,IAAA,IAAI,EAAC,8BADT;AAEI,IAAA,MAAM,EAAC,wDAFX;AAGI,IAAA,SAAS,EAAC;AAHd,KAKI;AAAK,IAAA,SAAS,EAAC;AAAf,KACI;AAAK,IAAA,SAAS,EAAC;AAAf,KACI,MAAC,KAAD;AACI,IAAA,EAAE,EAAC,iBADP;AAEI,IAAA,KAAK,EAAC,qDAFV,CAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AATA,KAWI,MAAC,KAAD;AACI,IAAA,MAAM,EAAE;AAAE0B,MAAAA,CAAC,EAAE,GAAL;AAAUC,MAAAA,CAAC,EAAE;AAAb,KADZ;AAEI,IAAA,KAAK,EAAE;AAAEC,MAAAA,UAAU,EAAE,CAAC,EAAf;AAAmBC,MAAAA,WAAW,EAAE,CAAC;AAAjC,KAFX;AAGI,IAAA,SAAS,EAAC,QAHd;AAII,IAAA,OAAO,EAAE,CACL;AACIzB,MAAAA,KAAK,EACD;AAAK,QAAA,SAAS,EAAC;AAAf,SACI;AAAK,QAAA,SAAS,EAAC;AAAf,eADJ,EAEI;AAAK,QAAA,SAAS,EAAC;AAAf,QAFJ,CAFR;AAOI0B,MAAAA,KAAK,EAAE,GAPX;AAQIxD,MAAAA,SAAS,EAAE,MARf;AASIkB,MAAAA,GAAG,EAAE;AATT,KADK,EAYL;AACIY,MAAAA,KAAK,EACD;AAAK,QAAA,SAAS,EAAC;AAAf,SACI;AAAK,QAAA,SAAS,EAAC;AAAf,yDADJ,EAEI;AAAK,QAAA,SAAS,EAAC;AAAf,SACI;AAAK,QAAA,SAAS,EAAC;AAAf,SACI;AAAK,QAAA,GAAG,EAAE2B,OAAO,CAAC,4BAAD;AAAjB,QADJ,EAEI;AACI,QAAA,KAAK,EAAE3D,KAAK,CAACW,SADjB;AAEI,QAAA,QAAQ,EAAE,kBAACiB,CAAD;AAAA,iBAAOtB,QAAQ,CAAC,KAAD,EAAQsB,CAAC,CAACgC,MAAF,CAASC,KAAjB,CAAf;AAAA,SAFd;AAGI,QAAA,WAAW,EAAC;AAHhB,QAFJ,CADJ,CAFJ,CAFR;AAgBIH,MAAAA,KAAK,EAAE,GAhBX;AAiBIxD,MAAAA,SAAS,EAAE,MAjBf;AAkBIkB,MAAAA,GAAG,EAAE;AAlBT,KAZK,EAgCL;AACIY,MAAAA,KAAK,EACD;AAAK,QAAA,SAAS,EAAC;AAAf,SACI;AAAK,QAAA,SAAS,EAAC;AAAf,4BADJ,EAEI;AAAK,QAAA,SAAS,EAAC;AAAf,QAFJ,CAFR;AAOI0B,MAAAA,KAAK,EAAE,GAPX;AAQIxD,MAAAA,SAAS,EAAE,MARf;AASIkB,MAAAA,GAAG,EAAE;AATT,KAhCK,EA2CL;AACIY,MAAAA,KAAK,EACD;AAAK,QAAA,SAAS,EAAC;AAAf,SACI;AAAK,QAAA,SAAS,EAAC;AAAf,4BADJ,EAEI;AAAK,QAAA,SAAS,EAAC;AAAf,QAFJ,CAFR;AAOI0B,MAAAA,KAAK,EAAE,EAPX;AAQIxD,MAAAA,SAAS,EAAE,MARf;AASIkB,MAAAA,GAAG,EAAE,MATT;AAUI0C,MAAAA,KAAK,EAAE,OAVX;AAWIC,MAAAA,MAAM,EAAE,gBAACtD,IAAD,EAAU;AACd,eACI;AAAK,UAAA,SAAS,EAAC;AAAf,WACI,MAAC,OAAD;AAAS,UAAA,SAAS,EAAC,SAAnB;AAA6B,UAAA,KAAK,EAAE;AAApC,WACI,mBACI;AACI,UAAA,OAAO,EAAE;AAAA,mBAAMgC,QAAQ,CAAChC,IAAD,CAAd;AAAA,WADb;AAEI,UAAA,SAAS,EAAC;AAFd,WAII;AAAG,UAAA,SAAS,EAAC;AAAb,UAJJ,CADJ,CADJ,CADJ,EAWI,MAAC,OAAD;AAAS,UAAA,SAAS,EAAC,SAAnB;AAA6B,UAAA,KAAK,EAAE;AAApC,WACI,mBACI;AACI,UAAA,OAAO,EAAE;AAAA,mBAAMoB,YAAY,CAACpB,IAAD,CAAlB;AAAA,WADb;AAEI,UAAA,SAAS,EAAC;AAFd,WAII;AAAG,UAAA,SAAS,EAAC;AAAb,UAJJ,CADJ,CADJ,CAXJ,CADJ;AAwBH;AApCL,KA3CK,CAJb;AAsFI,IAAA,UAAU,EAAET,KAAK,CAACD;AAtFtB,IAXJ,EAmGI;AAAK,IAAA,SAAS,EAAC;AAAf,KACI,MAAC,UAAD;AAAY,IAAA,KAAK,EAAEC,KAAK,CAACH,IAAzB;AAA+B,IAAA,UAAU,EAAEQ;AAA3C,IADJ,EAEI,MAAC,UAAD;AACI,IAAA,YAAY,EAAEE,YADlB;AAEI,IAAA,IAAI,EAAEP,KAAK,CAACF,IAFhB;AAGI,IAAA,IAAI,EAAEE,KAAK,CAACH,IAHhB;AAII,IAAA,KAAK,EAAEG,KAAK,CAACgB,KAJjB;AAKI,IAAA,KAAK,EAAE;AAAEgD,MAAAA,IAAI,EAAE,CAAR;AAAWC,MAAAA,cAAc,EAAE;AAA3B;AALX,IAFJ,CAnGJ,CADJ,CADJ,EAiHI;AAAK,IAAA,SAAS,EAAC;AAAf,KACI,MAAC,KAAD;AACI,IAAA,KAAK,EAAE/D,SAAS,CAACoC,EAAV,GAAe,WAAf,GAA6B,UADxC;AAEI,IAAA,EAAE,EAAE,eAFR,CAGA;AACA;;AAJA,KAMI,MAAC,IAAD;AAAM,IAAA,MAAM,EAAC,UAAb;AAAwB,IAAA,gBAAgB,MAAxC;AAAyC,IAAA,QAAQ,EAAEO;AAAnD,KACI;AAAK,IAAA,SAAS,EAAC;AAAf,KACI;AAAK,IAAA,SAAS,EAAC;AAAf,KACI,MAAC,IAAD,CAAM,IAAN;AAAW,IAAA,KAAK,EAAC;AAAjB,KACKO,iBAAiB,CAAC,eAAD,EAAkB;AAChCc,IAAAA,KAAK,EAAE,CACH;AACIC,MAAAA,QAAQ,EAAE,IADd;AAEIC,MAAAA,OAAO,EAAE;AAFb,KADG,CADyB;AAOhCC,IAAAA,YAAY,EAAEnE,SAAS,CAACQ,GAAV,GAAgBR,SAAS,CAACQ,GAA1B,GAAgC;AAPd,GAAlB,CAAjB,CASG,MAAC,KAAD;AACI,IAAA,QAAQ,EAAE,kBAACkB,CAAD;AAAA,aACNxB,QAAQ,CAAC;AACLM,QAAAA,GAAG,EAAEkB,CAAC,CAACgC,MAAF,CAASC;AADT,OAAD,CADF;AAAA,KADd;AAMI,IAAA,WAAW,EAAC;AANhB,IATH,CADL,CADJ,CADJ,CADJ,EA0BI;AACI,IAAA,KAAK,EAAE;AACHH,MAAAA,KAAK,EAAE,MADJ;AAEHY,MAAAA,SAAS,EAAE,mBAFR;AAGHC,MAAAA,OAAO,EAAE,eAHN;AAIHC,MAAAA,UAAU,EAAE,MAJT;AAKHC,MAAAA,SAAS,EAAE;AALR;AADX,KASI,MAAC,MAAD;AAAQ,IAAA,OAAO,EAAE;AAAA,aAAM/B,OAAO,EAAb;AAAA,KAAjB;AAAkC,IAAA,KAAK,EAAE;AAAEe,MAAAA,WAAW,EAAE;AAAf;AAAzC,gBATJ,EAYI,MAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,SAAb;AAAuB,IAAA,QAAQ,EAAC,QAAhC;AAAyC,IAAA,OAAO,EAAEZ;AAAlD,KACK3C,SAAS,CAACoC,EAAV,GAAe,cAAf,GAAgC,SADrC,CAZJ,CA1BJ,CANJ,CADJ,CAjHJ,CALJ,CADJ;AA8KH;;AACD,eAAelD,IAAI,CAAC+D,MAAL,GAAcxD,KAAd,CAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { AdminPage, Panel } from \"@admin/components/admin\";\r\nimport Table from \"@admin/components/common/Table\";\r\nimport SelectSize from \"@admin/components/common/SelectSize\";\r\nimport Pagination from \"@admin/components/common/Pagination\";\r\nimport { Select, Button, DatePicker, Form, Input, Tooltip, Modal } from \"antd\";\r\nimport statusProvider from \"@data-access/status-provider\";\r\nimport snackbar from \"@utils/snackbar-utils\";\r\nconst { confirm } = Modal;\r\nfunction index(props) {\r\n    const [state, _setState] = useState({\r\n        size: 10,\r\n        page: 0,\r\n        data: [],\r\n    });\r\n    const [dataIndex, setDataIndex] = useState({});\r\n    const setState = (data = {}) => {\r\n        _setState((state) => {\r\n            return { ...state, ...data };\r\n        });\r\n    };\r\n    const onSizeChange = (size) => {\r\n        onSearch(\"size\", size);\r\n        setState({\r\n            size: size\r\n        })\r\n    };\r\n    const onPageChange = (page) => {\r\n        onSearch(\"page\", page - 1);\r\n        setState({\r\n            page: page\r\n        })\r\n    };\r\n    useEffect(() => {\r\n        onSearch(0, 10);\r\n    }, []);\r\n    const onSearch = (action, item) => {\r\n        let page = action === \"page\" ? item : action === \"size\" ? 0 : state.page;\r\n        let size = action === \"size\" ? item : state.size;\r\n        let ten = action === \"ten\" ? item : state.tenSearch;\r\n        statusProvider\r\n            .search(page, size, ten)\r\n            .then((s) => {\r\n                if (s.code == 0) {\r\n                    setState({\r\n                        total: s.totalElements,\r\n                        data:\r\n                            s.data && s.data.length\r\n                                ? s.data.map((item, index) => {\r\n                                    return {\r\n                                        key: index,\r\n                                        col1: page * size + index + 1,\r\n                                        col2: item.ten,\r\n                                        col3: new Date(item.createdAt).format(\"dd-MM-YYYY\"),\r\n                                        col4: item,\r\n                                    };\r\n                                })\r\n                                : [],\r\n                    });\r\n                }\r\n            })\r\n            .catch((e) => { });\r\n    };\r\n    const onDeleteItem = (item) => {\r\n        return new Promise((resolve, reject) => {\r\n            confirm({\r\n                title: \"Xác nhận\",\r\n                content: `Bạn có muốn xóa trạng thái thiết lập ${item.ten}?`,\r\n                okText: \"Xóa\",\r\n                okType: \"danger\",\r\n                cancelText: \"Hủy\",\r\n                onOk() {\r\n                    statusProvider\r\n                        .delete(item.id)\r\n                        .then((s) => {\r\n                            if (s && s.code === 0) {\r\n                                snackbar.show(\"Xóa trạng thái thiết lập thành công\", \"success\");\r\n                                onSearch(0, 10);\r\n                            } else {\r\n                                snackbar.show(\"Xóa trạng thái thiết lập không thành công\", \"danger\");\r\n                            }\r\n                        })\r\n                        .catch((e) => { });\r\n                },\r\n                onCancel() {\r\n                    reject();\r\n                },\r\n            });\r\n        });\r\n    };\r\n    const editItem = (item) => {\r\n        if (item) {\r\n            setDataIndex(item)\r\n        } else {\r\n            setDataIndex(item)\r\n        }\r\n    };\r\n    const onClose = () => {\r\n        setDataIndex({});\r\n        setState({\r\n            ten: \"\"\r\n        })\r\n        props.history.push(\"/admin/status\")\r\n    }\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        props.form.validateFields((err, values) => {\r\n            if (!err) {\r\n                create();\r\n            }\r\n        });\r\n    };\r\n    const { getFieldDecorator } = props.form;\r\n    const create = () => {\r\n        let ten = state.ten ? state.ten : dataIndex.ten\r\n        statusProvider.createOrEdit(dataIndex.id, ten).then((s) => {\r\n            if (s && s.code === 0) {\r\n                if (dataIndex.id) {\r\n                    snackbar.show(\"Cập nhật trạng thái thiết lập thành công\", \"success\");\r\n                } else {\r\n                    snackbar.show(\"Thêm mới trạng thái thiết lập thành công\", \"success\");\r\n                }\r\n                onSearch(0, 10, \"\", \"\");\r\n                onClose()\r\n            } else {\r\n                if (dataIndex.id) {\r\n                    snackbar.show(\"Cập nhật trạng thái thiết lập thất bại\", \"danger\");\r\n                } else {\r\n                    snackbar.show(\"Thêm mới trạng thái thiết lập thất bại\", \"danger\");\r\n                }\r\n            }\r\n        }).catch((e) => { });\r\n    };\r\n    return (\r\n        <AdminPage\r\n            icon=\"subheader-icon fal fa-window\"\r\n            header=\"Quản lý trạng thái thiết lập\"\r\n            subheader=\"Danh sách trạng thái thiết lập\"\r\n        >\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-8 ui-sortable sortable-grid\">\r\n                    <Panel\r\n                        id=\"panel-list-site\"\r\n                        title=\"DANH SÁCH TRẠNG THÁI THIẾT LẬP\"\r\n                    // toolbar={\r\n                    //   <div className=\"toolbar\">\r\n                    //     <Button className=\"button\" onClick={() => editItem()}>\r\n                    //       Thêm mới\r\n                    // </Button>\r\n                    //   </div>\r\n                    // }\r\n                    >\r\n                        <Table\r\n                            scroll={{ x: 800, y: 500 }}\r\n                            style={{ marginLeft: -10, marginRight: -10 }}\r\n                            className=\"custom\"\r\n                            columns={[\r\n                                {\r\n                                    title: (\r\n                                        <div className=\"custome-header\">\r\n                                            <div className=\"title-box\">STT</div>\r\n                                            <div className=\"addition-box\"></div>\r\n                                        </div>\r\n                                    ),\r\n                                    width: 100,\r\n                                    dataIndex: \"col1\",\r\n                                    key: \"col1\",\r\n                                },\r\n                                {\r\n                                    title: (\r\n                                        <div className=\"custome-header\">\r\n                                            <div className=\"title-box\">Tên trạng thái thiết lập</div>\r\n                                            <div className=\"addition-box\">\r\n                                                <div className=\"search-box\">\r\n                                                    <img src={require(\"@images/icon/ic-search.png\")} />\r\n                                                    <input\r\n                                                        value={state.tenSearch}\r\n                                                        onChange={(e) => onSearch(\"ten\", e.target.value)}\r\n                                                        placeholder=\"Tìm theo tên trạng thái thiết lập\"\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    ),\r\n                                    width: 300,\r\n                                    dataIndex: \"col2\",\r\n                                    key: \"col2\",\r\n                                },\r\n                                {\r\n                                    title: (\r\n                                        <div className=\"custome-header\">\r\n                                            <div className=\"title-box\">Ngày tạo</div>\r\n                                            <div className=\"addition-box\"></div>\r\n                                        </div>\r\n                                    ),\r\n                                    width: 200,\r\n                                    dataIndex: \"col3\",\r\n                                    key: \"col3\",\r\n                                },\r\n                                {\r\n                                    title: (\r\n                                        <div className=\"custome-header\">\r\n                                            <div className=\"title-box\">Tiện ích</div>\r\n                                            <div className=\"addition-box\"></div>\r\n                                        </div>\r\n                                    ),\r\n                                    width: 90,\r\n                                    dataIndex: \"col4\",\r\n                                    key: \"col4\",\r\n                                    fixed: \"right\",\r\n                                    render: (item) => {\r\n                                        return (\r\n                                            <div className=\"col-action\">\r\n                                                <Tooltip placement=\"topLeft\" title={\"Sửa\"}>\r\n                                                    <div>\r\n                                                        <a\r\n                                                            onClick={() => editItem(item)}\r\n                                                            className=\"btn btn-info btn-icon waves-effect waves-themed\"\r\n                                                        >\r\n                                                            <i className=\"fal fa-edit\"></i>\r\n                                                        </a>\r\n                                                    </div>\r\n                                                </Tooltip>\r\n                                                <Tooltip placement=\"topLeft\" title={\"Xóa\"}>\r\n                                                    <div>\r\n                                                        <a\r\n                                                            onClick={() => onDeleteItem(item)}\r\n                                                            className=\"btn btn-info btn-icon waves-effect waves-themed\"\r\n                                                        >\r\n                                                            <i className=\"fal fa-trash-alt\"></i>\r\n                                                        </a>\r\n                                                    </div>\r\n                                                </Tooltip>\r\n                                            </div>\r\n                                        );\r\n                                    },\r\n                                },\r\n                            ]}\r\n                            dataSource={state.data}\r\n                        ></Table>\r\n                        <div className=\"footer\">\r\n                            <SelectSize value={state.size} selectItem={onSizeChange} />\r\n                            <Pagination\r\n                                onPageChange={onPageChange}\r\n                                page={state.page}\r\n                                size={state.size}\r\n                                total={state.total}\r\n                                style={{ flex: 1, justifyContent: \"flex-end\" }}\r\n                            />\r\n                        </div>\r\n                    </Panel>\r\n                </div>\r\n                <div className=\"col-lg-4  ui-sortable sortable-grid\">\r\n                    <Panel\r\n                        title={dataIndex.id ? \"Chỉnh sửa\" : \"Thêm mới\"}\r\n                        id={\"mgr-form-type\"}\r\n                    // allowClose={false}\r\n                    // allowCollapse={false}\r\n                    >\r\n                        <Form layout=\"vertical\" hideRequiredMark onSubmit={handleSubmit}>\r\n                            <div className=\"row\">\r\n                                <div className=\"col\">\r\n                                    <Form.Item label=\"Trạng thái thiết lập\">\r\n                                        {getFieldDecorator(\"dataIndex.ten\", {\r\n                                            rules: [\r\n                                                {\r\n                                                    required: true,\r\n                                                    message: \"Nhập trạng thái thiết lập\",\r\n                                                },\r\n                                            ],\r\n                                            initialValue: dataIndex.ten ? dataIndex.ten : \"\",\r\n                                        })(\r\n                                            <Input\r\n                                                onChange={(e) =>\r\n                                                    setState({\r\n                                                        ten: e.target.value,\r\n                                                    })\r\n                                                }\r\n                                                placeholder=\"Nhập trạng thái thiết lập\"\r\n                                            />\r\n\r\n                                        )}\r\n                                    </Form.Item>\r\n                                </div>\r\n                            </div>\r\n                            <div\r\n                                style={{\r\n                                    width: \"100%\",\r\n                                    borderTop: \"1px solid #e9e9e9\",\r\n                                    padding: \"16px 16px 0px\",\r\n                                    background: \"#fff\",\r\n                                    textAlign: \"right\",\r\n                                }}\r\n                            >\r\n                                <Button onClick={() => onClose()} style={{ marginRight: 8 }}>\r\n                                    Hủy\r\n                                </Button>\r\n                                <Button type=\"primary\" htmlType=\"submit\" onClick={handleSubmit}>\r\n                                    {dataIndex.id ? \"Lưu thay đổi\" : \"Tạo mới\"}\r\n                                </Button>\r\n                            </div>\r\n                        </Form>\r\n                    </Panel>\r\n                </div>\r\n            </div>\r\n        </AdminPage>\r\n    );\r\n}\r\nexport default Form.create()(index);"]},"metadata":{},"sourceType":"module"}
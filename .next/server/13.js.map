{"version":3,"file":"13.js","sources":["webpack:///./src/data-access/manufacturer-provider.js","webpack:///./src/site/admin/containers/manufacturer/create/index.js"],"sourcesContent":["import client from \"../utils/client-utils\";\r\nimport constants from \"../resources/strings\";\r\n\r\nexport default {\r\n  getById(id) {\r\n    let url = constants.api.manufacturer.search + \"/\" + id;\r\n    return client.requestApi(\"get\", url, {});\r\n  },\r\n\r\n  search(page, size, name, active, selected) {\r\n    let url = constants.api.manufacturer.search + \"?\";\r\n    url += \"page=\" + (page || 0) + \"&\";\r\n    url += \"size=\" + (size || 10) + \"&\";\r\n    if (name) url += \"name=\" + name + \"&\";\r\n    if (active !== undefined && active != -1)\r\n      url += \"active=\" + (active ? 1 : 0) + \"&\";\r\n    if (selected !== undefined) url += \"selected=\" + (selected ? 1 : 0) + \"&\";\r\n    return client.requestApi(\"get\", url, {});\r\n  },\r\n  delete(id) {\r\n    let url = constants.api.manufacturer.search + \"/\" + id;\r\n    return client.requestApi(\"delete\", url, {});\r\n  },\r\n  createOrEdit(id, ma, ten) {\r\n    if (!id) {\r\n      let url = constants.api.manufacturer.search;\r\n      return client.requestApi(\"post\", url, {\r\n        ma,\r\n        ten\r\n      });\r\n    } else {\r\n      let url = constants.api.manufacturer.search + \"/\" + id;\r\n      return client.requestApi(\"put\", url, {\r\n        ma,\r\n        ten\r\n      });\r\n    }\r\n  },\r\n};\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Form, Button, Col, Row, Input, Select, Switch } from \"antd\";\r\nimport hangSanXuatProvider from \"@data-access/manufacturer-provider\";\r\nimport snackbar from \"@utils/snackbar-utils\";\r\nimport dateUtils from \"mainam-react-native-date-utils\";\r\nimport { AdminPage, Panel } from \"@admin/components/admin\";\r\nfunction index(props) {\r\n    const id = props.match.params.id;\r\n    const [state, _setState] = useState({\r\n        data: [],\r\n        ma: \"\",\r\n        ten: \"\"\r\n    });\r\n    const setState = (data = {}) => {\r\n        _setState((state) => {\r\n            return { ...state, ...data };\r\n        });\r\n    };\r\n    useEffect(() => {\r\n        if (id) {\r\n            getDetail(id);\r\n        }\r\n    }, []);\r\n    const getDetail = (id) => {\r\n        hangSanXuatProvider.getById(id).then(s => {\r\n            if (s && s.code === 0) {\r\n                setState(s.data);\r\n            }\r\n        }).catch(e => { })\r\n    }\r\n    const onClose = () => () => {\r\n        props.history.push(\"/admin/hang-san-xuat\");\r\n    };\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n        props.form.validateFields((err, values) => {\r\n            if (!err) {\r\n                create();\r\n            }\r\n        });\r\n    };\r\n    const { getFieldDecorator } = props.form;\r\n    const create = () => {\r\n        hangSanXuatProvider.createOrEdit(id, state.ma, state.ten).then(s => {\r\n            if (s && s.code === 0) {\r\n                if (id) {\r\n                    snackbar.show(\"Cập nhật hãng sản xuất thành công\", \"success\");\r\n                } else {\r\n                    snackbar.show(\"Thêm mới hãng sản xuất thành công\", \"success\");\r\n                }\r\n                props.history.push(\"/admin/hang-san-xuat\");\r\n            } else {\r\n                if (id) {\r\n                    snackbar.show(\"Cập nhật hãng sản xuất thất bại\", \"danger\");\r\n                } else {\r\n                    snackbar.show(\"Thêm mới hãng sản xuất thất bại\", \"danger\");\r\n                }\r\n            }\r\n        }).catch(e => { })\r\n    }\r\n    return (\r\n        <AdminPage className=\"mgr-manufacturer\">\r\n            <Panel\r\n                title={id ? \"Chỉnh sửa hãng sản xuất\" : \"Thêm mới hãng sản xuất\"}\r\n                id={\"mgr-manufacturer\"}\r\n                allowClose={false}\r\n                allowCollapse={false}\r\n            >\r\n                <Form layout=\"vertical\" hideRequiredMark onSubmit={handleSubmit}>\r\n                    <div className=\"row\">\r\n                        <div className=\"col\">\r\n                            <Form.Item label=\"Mã hãng sản xuất\">\r\n                                {getFieldDecorator(\"ma\", {\r\n                                    rules: [\r\n                                        {\r\n                                            required: true,\r\n                                            message: \"Nhập mã hãng sản xuất\"\r\n                                        }\r\n                                    ],\r\n                                    initialValue: state.ma\r\n                                })(\r\n                                    <Input\r\n                                        onChange={e => setState({\r\n                                            ...state,\r\n                                            ma: e.target.value\r\n                                        })}\r\n                                        placeholder=\"Nhập mã hãng sản xuất\"\r\n                                    />\r\n                                )}\r\n                            </Form.Item>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className=\"col\">\r\n                            <Form.Item label=\"Loại form\">\r\n                                {getFieldDecorator(\"ten\", {\r\n                                    rules: [\r\n                                        {\r\n                                            required: true,\r\n                                            message: \"Nhập hãng sản xuất\"\r\n                                        }\r\n                                    ],\r\n                                    initialValue: state.ten\r\n                                })(\r\n                                    <Input\r\n                                        onChange={e => setState({\r\n                                            ...state,\r\n                                            ten: e.target.value\r\n                                        })}\r\n                                        placeholder=\"Nhập hãng sản xuất\"\r\n                                    />\r\n                                )}\r\n                            </Form.Item>\r\n                        </div>\r\n                    </div>\r\n                    <div\r\n                        style={{\r\n                            width: \"100%\",\r\n                            borderTop: \"1px solid #e9e9e9\",\r\n                            padding: \"16px 16px 0px\",\r\n                            background: \"#fff\",\r\n                            textAlign: \"right\"\r\n                        }}\r\n                    >\r\n                        <Button onClick={onClose(false)} style={{ marginRight: 8 }}>\r\n                            Hủy\r\n                        </Button>\r\n                        <Button type=\"primary\" htmlType=\"submit\" onClick={handleSubmit}>\r\n                            {id ? \"Lưu thay đổi\" : \"Tạo mới\"}\r\n                        </Button>\r\n                    </div>\r\n                </Form>\r\n            </Panel>\r\n        </AdminPage>\r\n    );\r\n}\r\n\r\nexport default (Form.create()(index));\r\n"],"mappings":";;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAnCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAMA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAEA;AACA;AAFA;AAKA;AAPA;AAUA;AAEA;AAFA;AAIA;AALA;AAWA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AAEA;AACA;AAFA;AAKA;AAPA;AAUA;AAEA;AAFA;AAIA;AALA;AAYA;AACA;AACA;AACA;AACA;AACA;AALA;AADA;AASA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;;;;A","sourceRoot":""}